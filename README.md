# HSE_HomeWorkAssembler2
üè´ –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ ‚Ññ2 –ø–æ –∫—É—Ä—Å—É "–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º", –ë–ü–ò216 –ë–∞–≥–∞–µ–≤ –ú–∞—Ä–∞—Ç

# –ó–∞–¥–∞–Ω–∏–µ –Ω–∞ 4 –±–∞–ª–ª–∞
1. –ù–∞–ø–∏—Å–∞–ª –∫–æ–¥ –Ω–∞ C - [program.c](program.c)
2. –° –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã ```gcc program.c -S -o program.s``` –ø–æ–ª—É—á–∏–ª –∫–æ–¥ –Ω–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–µ - [program.s](program.s)
3. –î–æ–±–∞–≤–∏–ª –≤ –∫–æ–¥ –Ω–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –ø–æ—è—Å–Ω—è—é—â–∏–µ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ –Ω–∞ C - [program.s](program.s)
4. –° –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã ```gcc -masm=intel -fno-asynchronous-unwind-tables -fno-jump-tables -fno-stack-protector -fno-exceptions program.c -S -o program_nice.s``` —É–±—Ä–∞–ª –∏–∑ –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω–æ–≥–æ –∫–æ–¥–∞ –ª–∏—à–Ω–∏–µ –º–∞–∫—Ä–æ—Å—ã - [program_nice.s](program_nice.s)
5. –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–ª –ø—Ä–æ–≥—Ä–∞–º–º—É –∏–∑ –∞—Å—Å–µ–º–±–ª–µ—Ä–∞ –≤ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã ```gcc program_nice.s -o program_nice.exe``` - [program_nice.exe](program_nice.exe) 
6. –ù–∞–ø–∏—Å–∞–ª –Ω–∞ –ø–∏—Ç–æ–Ω–µ —Ç–µ—Å—Ç–∏—Ä—É—é—â–∏–π —Å–∫—Ä–∏–ø—Ç - [script.py](script.py). –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –Ω–µ –≤—ã—è–≤–∏–ª–æ

# –ó–∞–¥–∞–Ω–∏–µ –Ω–∞ 5 –±–∞–ª–ª–æ–≤
1. –§—É–Ω–∫—Ü–∏–∏ —Å –ø–µ—Ä–µ–¥–∞—á–µ–π –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ä—Ç—ã —è —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª
2. –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —è —Ç–æ–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª
3. –î–æ–±–∞–≤–∏–ª –≤ [program.s](program.s) –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–µ –ø–µ—Ä–µ–¥–∞—á—É —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –ø–µ—Ä–µ–Ω–æ—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
4. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –ø–∞—Ä–∞–º–µ—Ä—Ç–∞–º–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞–º–∏ —É–∂–µ –±—ã–ª–∏([program.s](program.s))

# –ó–∞–¥–∞–Ω–∏–µ –Ω–∞ 6 –±–∞–ª–ª–æ–≤
1. –Ø –∑–∞–º–µ–Ω–∏–ª —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ —Å—Ç–µ–∫–∞ –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä—ã([program_without_vars.s](program_without_vars.s)):
- –í —Ñ—É–Ω–∫—Ü–∏–∏ main –∑–∞–º–µ–Ω–∏–ª int i = -10068[rbp] –Ω–∞ r15d
- –í —Ñ—É–Ω–∫—Ü–∏–∏ read –∑–∞–º–µ–Ω–∏–ª int ch = -4[rbp] –Ω–∞ r15d
- –í —Ñ—É–Ω–∫—Ü–∏–∏ read –∑–∞–º–µ–Ω–∏–ª int *size = -32[rbp] –Ω–∞ r14
- –í —Ñ—É–Ω–∫—Ü–∏–∏ read –∑–∞–º–µ–Ω–∏–ª FILE *stream = -40[rbp] –Ω–∞ r13
- –í —Ñ—É–Ω–∫—Ü–∏–∏ read –∑–∞–º–µ–Ω–∏–ª char str[] = -24[rbp] –Ω–∞ r12
- –í —Ñ—É–Ω–∫—Ü–∏–∏ countNumbers –∑–∞–º–µ–Ω–∏–ª int i = -4[rbp] –Ω–∞ r15d
- –í —Ñ—É–Ω–∫—Ü–∏–∏ countNumbers –∑–∞–º–µ–Ω–∏–ª int size = -28[rbp] –Ω–∞ r14d
- –í —Ñ—É–Ω–∫—Ü–∏–∏ countNumbers –∑–∞–º–µ–Ω–∏–ª int numbers_count[] = -40[rbp] –Ω–∞ r13
- –í —Ñ—É–Ω–∫—Ü–∏–∏ countNumbers –∑–∞–º–µ–Ω–∏–ª char str[] = -24[rbp] –Ω–∞ r12
2. –Ø –Ω–∞–¥–µ—é—Å—å, —á—Ç–æ –ø—É–Ω–∫—Ç–∞ 1 —Ö–≤–∞—Ç–∏—Ç –¥–ª—è –ø–æ—è—Å–Ω–µ–Ω–∏—è —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏—Å—Ö–æ–¥–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–∞ C
3. –Ø —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–ª –≤—Å–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —É –º–µ–Ω—è –±—ã–ª–∏ –∏ —Å–æ—Å—Ç–∞–≤–∏–ª —Ç–∞–±–ª–∏—Ü—É —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—è–º–∏ –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –ø–∞–º—è—Ç—å—é, –∫–æ—Ç–æ—Ä—É—é –æ–Ω–∏ –∑–∞–Ω–∏–º–∞—é—Ç

| –ü—Ä–æ–≥—Ä–∞–º–º–∞                 | –í—Ä–µ–º—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö   | –ü–∞–º—è—Ç—å –≤ –±–∞–π—Ç–∞—Ö    |
| --------------------------|:------------------:|:------------------:|
| [program_without_vars.exe](program_without_vars.s)  | 0.0014813077       | 16160              |
| [program_s.exe](program.s)             | 0.0013823280       | 16160              |
| [program_c.exe](program.c)             | 0.0012766633       | 16160              |
| [program_nice.exe](program_nice.s)          | 0.0013167038       | 16104              |

–ö–∞–∫ –∏ –≤ –ø—Ä–æ—à–ª—ã–π —Ä–∞–∑, –ø–æ—á–µ–º—É-—Ç–æ –∑–∞–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä—ã –Ω–µ —É—Å–∫–æ—Ä—è–µ—Ç –∫–æ–¥(–≤–æ–∑–º–æ–∂–Ω–æ –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ —Ç–µ—Å—Ç—ã –Ω–∞ –ø–∏—Ç–æ–Ω–µ). –í —ç—Ç–æ—Ç —Ä–∞–∑ –º—ã —É–∑–Ω–∞–ª–∏, —á—Ç–æ –æ–Ω –∏ –Ω–µ —É–º–µ–Ω—å—à–∞–µ—Ç –ø–∞–º—è—Ç—å, —Ç—Ä–µ–±—É–µ–º—É—é –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º—ã. 

–ø. —Å. –Ø —É–±—Ä–∞–ª –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ read —Å—Ç—Ä–æ—á–∫—É sub rsp, 48(–ø–æ—Ç–æ–º—É —á—Ç–æ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä–µ–≥–∏—Å—Ç—Ä—ã), –Ω–æ —ç—Ç–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ(–Ω–∏ –ø–æ —Å–∫–æ—Ä–æ—Å—Ç–∏, –Ω–∏ –ø–æ –ø–∞–º—è—Ç–∏)

–Ø —Ç–æ–ª—å–∫–æ —Å–µ–π—á–∞—Å –ø–æ–Ω—è–ª, —á—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–¥ —Ä–∞–∑–º–µ—Ä–∞–º–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–ª–∞—Å—å –¥–ª–∏–Ω–∞ –∫–æ–¥–∞. –Ø –≤–∑—è–ª –ø–µ—Ä–≤—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É, –ø–æ—Ç–æ–º –≤–∑—è–ª –≤—Ç–æ—Ä—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É ~~, –ø–µ—Ä–µ–º–Ω–æ–∂–∏–ª~~ - –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ(–ø–æ –¥–ª–∏–Ω–µ –∫–æ–¥–∞)

# –ó–∞–¥–∞–Ω–∏–µ –Ω–∞ 7 –±–∞–ª–ª–æ–≤
1. –°–æ–∑–¥–∞–ª –ø–∞–ø–∫—É "multi-module project". –†–∞–∑–¥–µ–ª–∏–ª –∏—Å—Ö–æ–¥–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É –Ω–∞ —Ç—Ä–∏ —á–∞—Å—Ç–∏. –ö–æ–¥ main —Ñ—É–Ω–∫—Ü–∏–∏ –≤ —Ñ–∞–π–ª–µ [main.c](multi-module_project/main.c) –Ω–∞ —è–∑—ã–∫–µ C, –∫–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏ read –≤ —Ñ–∞–π–ª–µ [read.s](multi-module\ project/read.s) –Ω–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–µ –∏ –∫–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏ countNumbers –≤ —Ñ–∞–π–ª–µ [countNumbers.s](multi-module project/countNumbers.s), —Ç–æ–∂–µ –Ω–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–µ. –° –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã ```gcc -c main.c read.s countNumbers.s``` –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª –∏—Ö –≤ –æ–±—ä–µ–∫—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –¥–∞–ª–µ–µ –∫–æ–º–∞–Ω–¥–æ–π ```gcc *.o -o "multi-module program.exe"``` –ø–æ–ª—É—á–∏–ª –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª
